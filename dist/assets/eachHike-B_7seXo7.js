import{d as D,a as u,f as I,q as v,c as C,w as S,g as q}from"./app-Mm52W_KA.js";function E(){return new URL(window.location.href).searchParams.get("docID")}async function R(){const n=E();try{const o=D(u,"hikes",n),a=(await I(o)).data(),r=a.name,i=a.code;document.getElementById("hikeName").textContent=r;const s=document.getElementById("hikeImage");s.src=`./images/${i}.jpg`,s.alt=`${r} image`}catch(o){console.error("Error loading hike:",o),document.getElementById("hikeName").textContent="Error loading hike."}}R();document.addEventListener("DOMContentLoaded",()=>{document.getElementById("writeReviewBtn").addEventListener("click",L)});function L(){const o=new URL(window.location.href).searchParams.get("docID");if(!o){console.warn("No hike ID found in URL. Cannot continue.");return}localStorage.setItem("hikeDocID",o),window.location.href="review.html"}async function x(){console.log("test");const n=document.getElementById("reviewCardTemplate"),o=document.getElementById("reviewCardGroup"),a=new URL(window.location.href).searchParams.get("docID");if(!a){console.warn("No hike ID found in URL.");return}try{const r=v(C(u,"reviews"),S("hikeDocID","==",a)),i=await q(r);console.log("Found",i.size,"reviews"),i.forEach(s=>{const e=s.data(),h=e.title||"(No title)",p=e.level||"(Not specified)",g=e.season||"(Not specified)",f=e.description||"",k=e.flooded||"(unknown)",y=e.scrambled||"(unknown)",d=e.rating||0;let m="";e.timestamp?.toDate&&(m=e.timestamp.toDate().toLocaleString());const t=n.content.cloneNode(!0);t.querySelector(".title").textContent=h,t.querySelector(".time").textContent=m,t.querySelector(".level").textContent=`Level: ${p}`,t.querySelector(".season").textContent=`Season: ${g}`,t.querySelector(".scrambled").textContent=`Scrambled: ${y}`,t.querySelector(".flooded").textContent=`Flooded: ${k}`,t.querySelector(".description").textContent=`Description: ${f}`;let l="";for(let c=0;c<d;c++)l+='<span class="material-icons">star</span>';for(let c=d;c<5;c++)l+='<span class="material-icons">star_outline</span>';t.querySelector(".star-rating").innerHTML=l,o.appendChild(t)})}catch(r){console.error("Error loading reviews:",r)}}x();

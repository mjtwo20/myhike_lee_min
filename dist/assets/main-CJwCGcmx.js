import{d as m,a as c,o as b,b as q,c as h,g,e as u,f as p,s as k,u as y,h as S,i as B}from"./app-Mm52W_KA.js";import"./loginSignup-q2Nt9ij1.js";function w(t){const e=m(c,"quotes",t);b(e,o=>{o.exists()?document.getElementById("quote-goes-here").innerHTML=o.data().quote:console.log("No such document!")},o=>{console.error("Error listening to document: ",o)})}w("tuesday");function x(){const t=document.getElementById("name-goes-here");q(async e=>{if(!e){location.href="index.html";return}const o=m(c,"users",e.uid),i=await p(o),s=i.exists()?i.data():{},r=s.name||e.displayName||e.email;t&&(t.textContent=`${r}!`);const a=s.bookmarks||[];await T(e.uid,a)})}x();function v(){const t=h(c,"hikes");console.log("Adding sample hike data..."),u(t,{code:"BBY01",name:"Burnaby Lake Park Trail",city:"Burnaby",level:"easy",details:"A lovely place for a lunch walk.",length:10,hike_time:60,lat:49.2467097082573,lng:-122.9187029619698,last_updated:k()}),u(t,{code:"AM01",name:"Buntzen Lake Trail",city:"Anmore",level:"moderate",details:"Close to town, and relaxing.",length:10.5,hike_time:80,lat:49.3399431028579,lng:-122.85908496766939,last_updated:k()}),u(t,{code:"NV01",name:"Mount Seymour Trail",city:"North Vancouver",level:"hard",details:"Amazing ski slope views.",length:8.2,hike_time:120,lat:49.38847101455571,lng:-122.94092543551031,last_updated:k()})}async function E(){const t=h(c,"hikes");(await g(t)).empty?(console.log("Hikes collection is empty. Seeding data..."),v()):console.log("Hikes collection already contains data. Skipping seed.")}E();async function T(t,e){let o=document.getElementById("hikeCardTemplate");const i=h(c,"hikes");try{(await g(i)).forEach(r=>{let a=o.content.cloneNode(!0);const n=r.data();a.querySelector(".card-title").textContent=n.name,a.querySelector(".card-text").textContent=n.details||`Located in ${n.city}.`,a.querySelector(".card-length").textContent=n.length,a.querySelector(".card-image").src=`./images/${n.code}.jpg`,a.querySelector(".read-more").href=`eachHike.html?docID=${m.id}`;const l=r.id,d=a.querySelector("i.material-icons");d.id="save-"+l;const f=e.includes(l);d.innerText=f?"bookmark":"bookmark_border",d.onclick=()=>C(t,l),document.getElementById("hikes-go-here").appendChild(a)})}catch(s){console.error("Error getting documents: ",s)}}async function C(t,e){const o=m(c,"users",t),r=((await p(o)).data()||{}).bookmarks||[],a="save-"+e,n=document.getElementById(a),l=r.includes(e);try{l?(await y(o,{bookmarks:S(e)}),n.innerText="bookmark_border"):(await y(o,{bookmarks:B(e)}),n.innerText="bookmark")}catch(d){console.error("Error toggling bookmark:",d)}}
